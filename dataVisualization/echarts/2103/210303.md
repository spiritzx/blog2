
# canvas 的优化
> 总结

## 离屏渲染
创建一个新的canvas，然后将要绘制的图形，先在新的且在 屏幕外 或者 不可见 的 canvas 中绘制，然后再以一定事件间隔将离屏 canvas 所绘制的,使用 drawImage() 将画到展现的 canvas 上.例如,我要展示几万个地图的上的点的连接,我并不需要在主图上一个一个绘制,而是等离屏 canvas 每隔一段事件绘制的结果,展现在我主图上就行了

## canvas 分层渲染
将需要频繁变动的图形放在同一层,将不怎么变动的放在另一图层,这样在频繁变动的只是清空同一层的图形,而另一层就不需要去频繁的渲染,减少消耗

## 动画使用 requesAnimationFrame
requestAnimationFrame 这是浏览器专门为动画提供的API，在运行时浏览器会自动优化方法的调用，节省系统资源，提高系统性能，如果页面不是激活状态下的话，requestAnimationFrame() 会被暂停调用以提升性能和电池寿命

## 大量计算使用 webworker
将需要消耗时间的计算开辟一个子进程,计算完毕在交给父进程渲染,减少不必要的卡顿
