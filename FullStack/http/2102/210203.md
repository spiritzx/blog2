
# websocket
> 网路基础;

## 概念
> WebSocket是一种在单个 TCP 连接上进行全双工通信的协议;

1. 由于是 tcp 连接,所以需要握手操作保证可靠性,但只要一次握手操作
2. 是全双工通信,在连接后服务器可以与浏览器双向发送信息

## 为什么使用
当想要获得服务器的变化信息,如获得最新聊天信息时. http 只能单向请求,通过轮询(定时请求服务器)呆板的一问一答.这种轮询方式会导致很多多余的请求,效率很低下.这时 websocket 可以在内容变动时,主动向客户端发送信息,减少无效请求.

## 特点
1. 建立在 TCP 协议之上，服务器端的实现比较容易。
2. 与 HTTP 协议有着良好的兼容性。默认端口也是80和443，并且握手阶段采用 HTTP 协议，因此握手时不容易屏蔽，能通过各种 HTTP 代理服务器。
3. 数据格式比较轻量，性能开销小，通信高效
4. 没有同源限制，客户端可以与任意服务器通信。
5. 协议标识符是ws（如果加密，则为wss），服务器网址就是 URL。

## 怎么使用

```
1. 初始化
var ws = new WebSocket("wss://echo.websocket.org");

ws.onopen = function(evt) { 
    // 客户端向服务端发送信息
    ws.send("Hello WebSockets!");
};

ws.onmessage = function(evt) {
    // 接收信息
    var data = event.data;
    // 关闭
    ws.close();
};
 
```

