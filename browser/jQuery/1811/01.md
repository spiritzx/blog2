# jQuery源码分析(1)-立即函数封装
> 版本：1.7.2；时间：181113

### 代码
```
(function (window, undefined) {
  ...
  window.jQuery = window.$ = jQuery;
})(window)
```

### 立即函数封装
1. 第一个（）将函数使得函数变为表达式，只有表达式才能被执行符号执行；第二个（）立即执行这个函数
2. 函数声明：function name() {} => 具名函数；function () {}；=> 匿名函数
3. 匿名函数使用的地方：立即封装函数，回调函数
4. 函数声明变为函数表达式多种方法：除了使用()运算符之外，！，+，-，=等运算符都能起到立即执行的作用。这些运算符的作用就是将匿名函数或函数声明转换为函数表达式，如
```
!function(test) => {
  console.log(test)
}(1)
```

### 立即函数参数的使用
1. 通过把参数window，把全局对象传入
2. undefined并不是JS中的关键字，在IE8及以下中是可以对其重新赋值的，通过undefined解决undefined默认值被覆盖导致的异常

### 立即函数变种
```
(function (fn) {
  fn(window)
})(function (g) {
  let _g = g; // 全局对象
  console.log(_g)
})
```

### 立即函数向外暴露接口
```
window.jQuery = window.$ = jQuery;
```

### 立即函数的好处
1. 创建一个独立的作用域，内部可以访问外部的变量，而外部环境不能访问作用域内部的变量，从而保护变量和方法不被全局污染。
2. 减少全局变量和方法，最大限度的本地化，只暴露了jQuery和$方法

