
# 提高首屏加载速度-基础
## 什么是首屏-第一眼看到的
我们所说的首屏时间，就是指用户在没有滚动时候看到的内容渲染完成并且可以交互的时间。至于加载时间，则是整个页面滚动到底部，所有内容加载完毕并可交互的时间。

## 为什么要做首屏优化-用户体验为王
研究认为，用户最满意的网页打开时间是2秒以内。我们就应该最可能将首屏时间甚至加载时间控制在2秒以内，让用户体验到最佳的页面体验。

## 减少首页加载文件大小
#### 资源压缩
1. html，css，js进行压缩
2. js文件还可以进行混淆（将长的命名改为单字节）
3. 开启gzip:在实际的应用中我们发现压缩的比率往往在 3 到 10 倍，也就是本来 50k 大小的页面，采用压缩后实际传输的内容大小只有 5 至 15k 大小。[nginx开启gzip](https://www.tomz.club/blog/md/FullStack/Nginx/2020-04/190401.md)

#### 正确使用图片格式
1. png24：当你需要的图片要求比较高，比如摄影作品时
2. png8：当你作品需要透明色或者颜色比较单一时
3. jpg：图片颜色比较丰富，但你不需要高品质且不需要透明，可以用jpg，进行有损压缩从而降低图片体积
4. webp: 相同质量的情况下，比jpg体积更少，但ios不支持
5. svg矢量图：加载文件体积小，但图片样式相对简单，例如:iconfont,通过font-face引入
6. base64: 图片的 base64 编码就是可以将一副图片数据编码成一串字符串，使用该字符串代替图像地址，从而减少服务器的请求，但比正常图片大一点。而且 CSS 文件体积的增大，css 解析速度也会变慢
7. sprite图：将一个页面涉及到的所有零星图片都包含到一张大图中，同样可以减少服务器访问速度而且减少图片的总 size，但维护困难，一般就要改这张合并的图片

## 资源正确的加载
1. 对于首页的css: 可以内联与 head 中，防止再次去请求服务器
2. js 引入放到页尾
3. 首屏外的图片，可以懒加载，当可视区域达到时在加载，减少图片并发请求以及渲染

## 降低服务器请求时间
1. 加大服务器的宽带，例如我的服务器宽带是2M，最高为256kb/s，当用户请求越多或者资源过大，加载就很慢了
2. 降低请求距离，cdn加速，通过cdn（内容分发网络）使用户就近获取所需内容，降低网络拥塞，提高用户访问响应速度和命中率。
